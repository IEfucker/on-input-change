/*
 * @cnpm/oninput-polyfill 0.1.0
 * IE9- oninput polyfill
 * Copyright 2018, Jack Bai
 * Released under the MIT license.
*/

!function(c){var i;var p=(i=!("onblur"in document.documentElement),function(t,n){var e;return!!t&&(n&&"string"!=typeof n||(n=document.createElement(n||"div")),!(e=(t="on"+t)in n)&&i&&(n.setAttribute||(n=createElement("div")),n.setAttribute(t,""),e="function"==typeof n[t],void 0!==n[t]&&(n[t]=void 0),n.removeAttribute(t)),e)})("input","input");function n(t){var n,e,i=t.selector||"",o=t.time||150,r=this;if(c(i)[0]&&(setTimeout(function(){c(i).each(function(){c(this).prop("prev-value",c(this).val())})},0),n=navigator.appName,e=navigator.appVersion.split(";")[1].replace(/[ ]/g,""),"Microsoft Internet Explorer"==n&&"MSIE9.0"==e&&(c("body").on("keydown",i,function(){var t=window.event.keyCode,n=c(this);8!=t&&46!=t&&90!=t||setTimeout(function(){r._check(n)},0)}),c("body").on("cut",i,function(){setTimeout(function(){c(this).trigger("input",{isCustom:!0})},0)})),!p)){this.options=c.extend({time:o},t);var u=c.proxy(this._listen,this),s=c.proxy(this._unlisten,this);c("body").on("focus",i,u),c("body").on("blur",i,s)}}n.prototype={_listen:function(t){var n=c.proxy(this._check,this);return this._interval=window.setInterval(function(){n(c(t.target))},this.options.time),!0},_unlisten:function(){return window.clearInterval(this._interval),!0},_run:function(t){t.prop("prev-value",t.val()),t.trigger("input",{isCustom:!0})},_check:function(t){t.val()!=t.prop("prev-value")&&this._run(t)}},c.extend({onInputPolyfill:function(t){new n(t)},onInputSupport:p})}(window.jQuery);